# Tests Directory

è¿™ä¸ªç›®å½•åŒ…å«äº† CMMI Specs Agent é¡¹ç›®çš„æ‰€æœ‰æµ‹è¯•å·¥å…·ã€‚

## æµ‹è¯•æ–‡ä»¶è¯´æ˜

### ğŸš€ ç»Ÿä¸€æµ‹è¯•å¯åŠ¨å™¨

- **`run-all-tests.js`** - ä¸»è¦çš„ç»Ÿä¸€æµ‹è¯•è„šæœ¬ï¼Œè¿è¡Œæ‰€æœ‰æµ‹è¯•å¹¶ç”Ÿæˆç»Ÿä¸€æŠ¥å‘Š

### ğŸ”§ æ ¸å¿ƒæµ‹è¯•å·¥å…·

- **`mcp-client-test.js`** - MCPåè®®å®Œæ•´æ€§æµ‹è¯•ï¼ŒéªŒè¯6ä¸ªæ ¸å¿ƒå·¥å…·çš„åŠŸèƒ½
- **`validate-tools.js`** - å·¥å…·å®šä¹‰éªŒè¯ï¼Œæ£€æŸ¥JSON Schemaå…¼å®¹æ€§ (å·²åºŸå¼ƒ)
- **`verify-mcp.sh`** - ç¯å¢ƒéªŒè¯è„šæœ¬ï¼Œæ£€æŸ¥ä¾èµ–å’Œé…ç½®
- **`test-document-auto-landing.mjs`** - æ–‡æ¡£è‡ªåŠ¨ç”ŸæˆåŠŸèƒ½çš„ç«¯åˆ°ç«¯æµ‹è¯•

### ğŸŒ é€šç”¨æµ‹è¯•æ¡†æ¶

- **`universal-test-framework.js`** - é€šç”¨å¤šè¯­è¨€æµ‹è¯•æ¡†æ¶æ ¸å¿ƒç±»
- **`test-scenarios.json`** - é»˜è®¤æµ‹è¯•åœºæ™¯é…ç½®æ–‡ä»¶
- **`run-universal-tests.js`** - é€šç”¨æ¡†æ¶ä¸»è¿è¡Œè„šæœ¬
- **`test-integration.js`** - æ¡†æ¶é›†æˆéªŒè¯è„šæœ¬

## è¿è¡Œæµ‹è¯•

### å¿«é€Ÿå¯åŠ¨

#### è¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶ï¼ˆæ¨èï¼‰

```bash
node tests/run-all-tests.js
```

#### å•ç‹¬è¿è¡Œé€šç”¨æµ‹è¯•æ¡†æ¶

```bash
cd tests
node run-universal-tests.js
```

#### åŸºç¡€é›†æˆéªŒè¯

```bash
cd tests  
node test-integration.js
```

```bash
# è¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶
./test-all.sh

# æˆ–è€…ç›´æ¥è¿è¡Œ
node tests/run-all-tests.js
```

### å•ç‹¬æµ‹è¯•

```bash
# MCPåè®®æµ‹è¯•
node tests/mcp-client-test.js

# å·¥å…·éªŒè¯
node tests/validate-tools.js

# ç¯å¢ƒæ£€æŸ¥
./tests/verify-mcp.sh

# æ–‡æ¡£ç”Ÿæˆæµ‹è¯•
node tests/test-document-auto-landing.mjs
```

## æµ‹è¯•è¾“å‡º

æ‰€æœ‰æµ‹è¯•ç»“æœéƒ½ç»Ÿä¸€è¾“å‡ºåˆ° `test-output/` ç›®å½•ï¼š

- `unified-test-report.json` - å®Œæ•´æµ‹è¯•å¥—ä»¶æŠ¥å‘Š
- `mcp-protocol-test-report.json` - MCPåè®®æµ‹è¯•è¯¦ç»†æŠ¥å‘Š
- `universal-test-report.json` - é€šç”¨æ¡†æ¶æµ‹è¯•æŠ¥å‘Š
- `docs/` - ç”Ÿæˆçš„CMMIæ–‡æ¡£
- `agents/` - æµ‹è¯•ç”¨çš„ä»£ç†é…ç½®

## é€šç”¨æµ‹è¯•æ¡†æ¶è¯¦è§£

### ç‰¹æ€§

é€šç”¨æµ‹è¯•æ¡†æ¶æ˜¯ä¸€ä¸ªé…ç½®é©±åŠ¨çš„å¤šè¯­è¨€æµ‹è¯•ç³»ç»Ÿï¼Œæ”¯æŒï¼š

- ğŸŒ **å¤šè¯­è¨€æ”¯æŒ**: ä¸­æ–‡ã€è‹±æ–‡ã€æ··åˆè¯­è¨€æ–‡æ¡£
- âš™ï¸ **é…ç½®é©±åŠ¨**: JSONåœºæ™¯é…ç½®ï¼Œæ— éœ€ä¿®æ”¹ä»£ç 
- ğŸš€ **è‡ªåŠ¨åŒ–éªŒè¯**: å†…å®¹é•¿åº¦ã€è¯­è¨€æ£€æµ‹ã€CMMIæ ‡å‡†æ£€æŸ¥
- ğŸ“Š **è¯¦ç»†æŠ¥å‘Š**: æˆåŠŸç‡ç»Ÿè®¡å’Œè¯¦ç»†å¤±è´¥åŸå› 

### åœºæ™¯é…ç½®ç¤ºä¾‹

```json
{
  "scenarios": [
    {
      "id": "chinese-system",
      "name": "ä¸­æ–‡ç³»ç»Ÿæµ‹è¯•",
      "language": "zh",
      "task_content": "å¼€å‘åŸºäºVue.jsçš„ç®¡ç†ç³»ç»Ÿ",
      "expected_files": ["requirements.md", "design.md"],
      "validation_rules": {
        "min_content_length": 100,
        "required_sections": ["# "],
        "language_consistency": true
      }
    }
  ]
}
```

### è‡ªå®šä¹‰æµ‹è¯•

1. åˆ›å»ºè‡ªå®šä¹‰åœºæ™¯æ–‡ä»¶ `my-scenarios.json`
2. è¿è¡Œ: `node run-universal-tests.js my-scenarios.json`
3. æŸ¥çœ‹è¯¦ç»†æŠ¥å‘Š: `test-output/universal-test-report.json`

### æ”¯æŒçš„éªŒè¯è§„åˆ™

- `min_content_length`: æœ€å°å†…å®¹é•¿åº¦
- `required_sections`: å¿…éœ€ç« èŠ‚æ ‡é¢˜
- `cmmi_headers`: CMMIæ ‡å‡†æ ‡é¢˜æ£€æŸ¥
- `api_placeholder_check`: APIå ä½ç¬¦æ£€æŸ¥
- `language_consistency`: è¯­è¨€ä¸€è‡´æ€§éªŒè¯

æ‰€æœ‰æµ‹è¯•ç»“æœå’Œç”Ÿæˆçš„æ–‡ä»¶éƒ½ä¿å­˜åœ¨ `test-output/` ç›®å½•ï¼š

```text
test-output/
â”œâ”€â”€ unified-test-report.json    # ç»Ÿä¸€æµ‹è¯•æŠ¥å‘Š
â”œâ”€â”€ mcp-protocol-test-report.json  # MCPåè®®æµ‹è¯•è¯¦ç»†æŠ¥å‘Š
â”œâ”€â”€ agents/                     # ç”Ÿæˆçš„ä»£ç†é…ç½®
â”œâ”€â”€ docs/                       # ç”Ÿæˆçš„æ–‡æ¡£
â””â”€â”€ ...                         # å…¶ä»–æµ‹è¯•è¾“å‡º
```

## æµ‹è¯•çŠ¶æ€

- âœ… **ç¯å¢ƒæ£€æŸ¥**: éªŒè¯Node.jsã€npmã€MCPæœåŠ¡å™¨æ„å»ºçŠ¶æ€
- âœ… **MCPåè®®æµ‹è¯•**: 6/6 å·¥å…·é€šè¿‡æµ‹è¯•ï¼ŒæˆåŠŸç‡100%
- âœ… **å·¥å…·å®šä¹‰éªŒè¯**: JSON Schemaå…¼å®¹æ€§æ£€æŸ¥é€šè¿‡
- âš ï¸ **æ–‡æ¡£è‡ªåŠ¨ç”Ÿæˆ**: åŸºæœ¬åŠŸèƒ½æ­£å¸¸ï¼Œéƒ¨åˆ†æµ‹è¯•æ£€æŸ¥éœ€è¦è°ƒæ•´

## æµ‹è¯•è¦†ç›–èŒƒå›´

1. **ç¯å¢ƒéªŒè¯**: Node.jsç‰ˆæœ¬ã€ä¾èµ–åŒ…ã€æ„å»ºçŠ¶æ€
2. **åè®®å…¼å®¹æ€§**: MCP JSON-RPC 2.0 åè®®æ¡æ‰‹å’Œé€šä¿¡
3. **å·¥å…·åŠŸèƒ½**: 6ä¸ªæ ¸å¿ƒMCPå·¥å…·çš„å®Œæ•´åŠŸèƒ½æµ‹è¯•
4. **æ–‡æ¡£ç”Ÿæˆ**: å¤šä»£ç†åä½œçš„æ–‡æ¡£è‡ªåŠ¨ç”Ÿæˆæµç¨‹
5. **é…ç½®éªŒè¯**: ä»£ç†é…ç½®æ–‡ä»¶çš„æ­£ç¡®æ€§æ£€æŸ¥
